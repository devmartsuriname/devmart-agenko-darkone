# Restore Point: A12.7 — Public Hero ↔ DB Wiring

**Created:** 2025-12-19  
**Phase:** A12.7  
**Status:** Before Change

---

## Problem Statement

The `useHeroSections` query sorts by `sort_order ASC` only. When multiple hero sections have the same `sort_order`, the result order is non-deterministic. Adding `updated_at DESC` as a tie-breaker ensures consistent ordering.

---

## Decision

Add secondary sort `updated_at DESC` to `useHeroSections` query for deterministic ordering when `sort_order` values are equal.

---

## Scope

| Item | Change |
|------|--------|
| `apps/public/src/hooks/useContent.js` | Add `.order('updated_at', { ascending: false })` to line 57 |

---

## Files Modified

1. `apps/public/src/hooks/useContent.js` — Line 57: add tie-breaker sort

---

## What Will NOT Change

- Hero component UI (`apps/public/src/components/Hero/index.jsx`)
- DB schema
- RLS policies
- Darkone Admin UI
- CTA fields (remain hidden per A12.6)

---

## Rollback Steps

1. Open `apps/public/src/hooks/useContent.js`
2. Remove the second `.order('updated_at', { ascending: false })` call from `useHeroSections` (around line 58)
3. Verify query returns to single sort: `.order('sort_order', { ascending: true })`

---

## Original Code (Line 53-57)

```javascript
const { data, error } = await supabase
  .from('hero_sections')
  .select('*')
  .eq('is_active', true)
  .order('sort_order', { ascending: true });
```
