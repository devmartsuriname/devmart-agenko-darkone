# Restore Point — Phase A12.12a WhyChoose Admin Structure

**Created:** 2025-12-20  
**Phase:** A12.12a — WhyChoose Admin Structure + Database  
**Type:** Pre-change snapshot

---

## Purpose

Snapshot of system state before implementing:
- Database table `home_whychoose` with JSONB features
- Admin CRUD at `/frontend/sections/home/whychoose`
- RLS policies for the new table

---

## Affected Files (Before Change)

### To Be Created
- `apps/admin/src/app/(admin)/frontend/sections/home/whychoose/page.tsx`
- `apps/admin/src/app/(admin)/frontend/sections/home/whychoose/components/WhyChooseForm.tsx`
- `apps/admin/src/app/(admin)/frontend/sections/home/whychoose/components/WhyChooseDeleteModal.tsx`

### To Be Modified
- `apps/admin/src/routes/index.tsx` — Add route for WhyChoose
- `apps/admin/src/helpers/Manu.ts` — Add sidebar item (if needed)
- `docs/backend.md` — Phase A12.12a documentation
- `docs/architecture.md` — Phase A12.12a status

### Database Changes
- New table: `home_whychoose`
- RLS policies for admin/editor/public access

---

## WhyChoose Section Analysis

### Current Public Component Props
```typescript
interface WhyChoseProps {
  sectionTitle: string;       // "We have depth of market knowledge"
  sectionSubTitle: string;    // "Why Choose Us"
  whyChoseFeatureData: Array<{ title: string; content: string }>;
  thumbnailSrc: string;       // "/images/creative-agency/why_choose_us_img_3.jpeg"
}
```

### Current Fallback Data (Home.jsx)
```javascript
const fallbackWhyChose = [
  {
    title: 'Talented, professional & expert team',
    content: 'Our team, specializing in strategic digital marketing...',
  },
  {
    title: 'Highly accuracy AI based system',
    content: 'Our team, specializing in strategic digital marketing...',
  },
  {
    title: 'Secret successful brand strategy formula',
    content: 'Our team, specializing in strategic digital marketing...',
  },
];
```

---

## Design Decision: JSONB Features

### Why JSONB (Single Table) vs Separate Features Table

**Chosen: Single table with JSONB `features` column**

Reasoning:
1. **Homepage-only**: This section is NOT reusable across pages
2. **Single record**: Only ONE WhyChoose section exists per homepage
3. **Ordered array**: Features are already ordered in JSONB array
4. **Atomic updates**: All features updated together as a unit
5. **Simpler admin**: No FK relationships to manage
6. **Pattern consistency**: Same as `home_about_sections.bullets` (JSONB array)

This follows the established pattern for homepage-specific sections.

---

## Rollback Instructions

If Phase A12.12a needs to be rolled back:

1. Delete the WhyChoose admin CRUD files:
   - `apps/admin/src/app/(admin)/frontend/sections/home/whychoose/`

2. Remove route from `apps/admin/src/routes/index.tsx`

3. Remove sidebar item from `apps/admin/src/helpers/Manu.ts` (if added)

4. Drop the database table:
   ```sql
   DROP TABLE IF EXISTS public.home_whychoose CASCADE;
   ```

5. Revert documentation changes in backend.md and architecture.md

---

## Notes

- Public wiring deferred to Phase A12.12b
- No UI changes to Zivan WhyChose component
- Features limited by design (3 items in template)
- Section metadata + features in single table
